import sqlite3

def conectar():
    return sqlite3.connect("filmes.db")

def adicionar_filme():
    titulo = input("T√≠tulo do filme: ")
    ano = input("Ano de lan√ßamento: ")
    genero = input("G√™nero: ")

    conn = conectar()
    cursor = conn.cursor()
    cursor.execute("INSERT INTO filmes (titulo, ano, genero) VALUES (?, ?, ?)",
                   (titulo, ano, genero))
    conn.commit()
    conn.close()
    print("‚úÖ Filme adicionado com sucesso!")

def listar_filmes():
    conn = conectar()
    cursor = conn.cursor()
    cursor.execute("SELECT * FROM filmes")
    filmes = cursor.fetchall()
    conn.close()

    print("\nüé¨ Lista de Filmes:")
    for filme in filmes:
        print(f"ID: {filme[0]} | T√≠tulo: {filme[1]} | Ano: {filme[2]} | G√™nero: {filme[3]}")
    print()

def buscar_por_genero():
    genero = input("Digite o g√™nero para buscar: ")
    conn = conectar()
    cursor = conn.cursor()
    cursor.execute("SELECT * FROM filmes WHERE genero LIKE ?", (f"%{genero}%",))
    filmes = cursor.fetchall()
    conn.close()

    print("\nüîé Resultados:")
    for filme in filmes:
        print(f"{filme[1]} ({filme[2]}) - G√™nero: {filme[3]}")
    print()

def menu():
    while True:
        print("\nüìΩÔ∏è  Menu:")
        print("1. Adicionar filme")
        print("2. Listar filmes")
        print("3. Buscar por g√™nero")
        print("0. Sair")

        opcao = input("Escolha uma op√ß√£o: ")

        if opcao == "1":
            adicionar_filme()
        elif opcao == "2":
            listar_filmes()
        elif opcao == "3":
            buscar_por_genero()
        elif opcao == "0":
            print("üëã Saindo...")
            break
        else:
            print("Op√ß√£o inv√°lida. Tente novamente.")

if __name__ == "__main__":
    menu()
